Ikusth
======

Introduction
------------

Do you hate wasting time processing traces.txt file with your mind? Try Ikusth :)

This tool is a ChkBugReport external plugin which allows you to generate a threads dependency graph given a traces.txt or bugreport file.

Output example:


![ikusth_outputsample.jpg](example/ikusth_outputsample.jpg)

Usage
-----

* The easy way (just use the jars we provide)

Install Graphviz (what we use to render the graph) if you don't have it:
e.g brew install graphviz
More info: http://www.graphviz.org/Download..php

Clone this repo:
git clone https://github.com/sonyxperiadev/ChkBugReport.git
From the repo folder do:
cd dist
Just run against your traces.txt file:
java -jar ./chkbugreport-0.5-215.jar -sn:traces.txt --browser

Note:
traces.txt is the input traces file you've generated.
E.g doing adb pull /data/anr/traces.txt after ANR
Nice blog post about it: http://www.twisterrob.net/blog/2015/04/android-full-thread-dump.html

* The better way

Clone ChkBugReport:
git clone https://github.com/sonyxperiadev/ChkBugReport.git
Compile ChkBugReport:
cd ChkBugReport/core/ && sh createjar.sh
chkbugreport-0.5-215.jar will be generated on ChkBugReport/core/, just copy it wherever you want
Just run against your traces.txt file:
java -jar ./chkbugreport-0.5-215.jar -sn:traces.txt --browser

Clone Ikusth:
cd ..
git clone https://github.com/tuenti/ikusth.git
cd ikusth
./gradlew build
ikusth-1.0.jar will be genreated in ikusth/build/libs/, copy it to ~/.chkbugreport or "extplugins" dir relative to chkbugreport-0.5-215.jar

### More about running it ###

Given a traces.txt you have:
java -jar ./chkbugreport-0.5-215.jar -sn:traces.txt --browser

This would open the browser with the report and the graph output image (generated by this external plugin).
You can also see where the generated png is after this run output line:
Running (generate) plugin: com.tuenti.ikusth.Ikusth...

ChkBugReport has way more options you can try:

[https://github.com/sonyxperiadev/ChkBugReport/wiki/Quick-instructions
](Link URL)[https://github.com/sonyxperiadev/ChkBugReport/wiki/Command-line-options](Link URL)

FAQ
---

* Generated png is empty
Probably your traces.txt has no dependant threads.

* I get this error:
Running (generate) plugin: com.tuenti.ikusth.Ikusth...
org.enoir.graphvizapi.exception.GraphException: java.io.IOException: Cannot run program "dot": error=2, No such file or directory
	at org.enoir.graphvizapi.Graphviz.get_img_stream(Graphviz.java:132)
	at org.enoir.graphvizapi.Graphviz.getGraphByteArray(Graphviz.java:58)
	at com.tuenti.ikusth.Ikusth.generate(Ikusth.java:72)
	at com.sonyericsson.chkbugreport.Module.runPlugins(Module.java:676)
	at com.sonyericsson.chkbugreport.Module.generate(Module.java:567)
	at com.sonyericsson.chkbugreport.Main.run(Main.java:232)
	at com.sonyericsson.chkbugreport.Main.main(Main.java:358)
Assure Graphviz is installed.

Credits & Contact
-----------------

`chkbugreport-locks-plugin` was created by [Tuenti Technologies S.L.](http://github.com/tuenti)

You can follow Tuenti engineering team on Twitter [@tuentieng](http://twitter.com/tuentieng).

License
-------

`chkbugreport-locks-plugin` is available under the GPL, Version 2.0. See LICENSE file
for more info.